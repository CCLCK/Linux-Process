[toc]



# ğŸŠç¨‹åºåœ°å€ç©ºé—´

**è¿›ç¨‹åœ°å€ç©ºé—´å›¾**

![image-20220116222258292](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220116222258292.png)



**checkarea.c**

```c
#include<stdio.h>    
#include<unistd.h>    
#include<stdlib.h>    
    
int glo_val=0;    
int uninit_val;    
    
int main(int argc,char* argv[],char* env[])    
{    
  //ä»£ç åŒº    
  printf("code addr:%p\n\n",main);    
  //å­—ç¬¦å¸¸é‡åŒº    
  const char* p="hello world!";    
  printf("read only addr:%p\n\n",p);    
  //å·²åˆå§‹åŒ–å…¨å±€å˜é‡åŒº    
  printf("glo_val addr:%p\n",&glo_val);    
  //æœªåˆå§‹åŒ–å…¨å±€å˜é‡åŒº    
  printf("uninit addr:%p\n\n",&uninit_val);    
  //å †åŒº    
  char* q=(char*)malloc(10);    
  printf("heap addr:%p\n\n",q);    
  //æ ˆåŒº    
  printf("stack addr:%p\n",&p);    
  printf("stack addr:%p\n\n",&q);    
  //å‘½ä»¤è¡Œå‚æ•°    
  printf("args addr:%p\n",argv[0]);    
  printf("args addr:%p\n\n",argv[argc-1]);    
  //ç¯å¢ƒå˜é‡    
  printf("env addr:%p\n\n",env[0]);    
    
  //æµ‹è¯•staticä¿®é¥°çš„å˜é‡åœ¨å“ªå—åŒºåŸŸ    
  static int a=0;    
  printf("static addr:%p\n\n",&a);                                                                                                                        
    return 0;
}    
```

è¿è¡Œï¼š![image-20220116222454360](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220116222454360.png)

å°†å…¶ä¸ä»£ç ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼š

![image-20220116223649233](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220116223649233.png)



## ğŸˆè™šæ‹Ÿåœ°å€

```c
#include<stdio.h>    
#include<unistd.h>      
   
int glo_val=0;    
 
int main()    
{    
  int ret=fork();    
  if(ret>0)    
  {    
  	//parent    
    while(1)    
    {    
      sleep(1);    
      printf("\n i am father::glo_val:%d, &glo_val:%p\n",glo_val,&glo_val);   
    }    
  }    
  else    
  {    
    //child    
    glo_val=100;    
    while(1)    
    {    
      sleep(1);                                                      
      printf("\n i am son::   glo_val:%d, &glo_val:%p\n",glo_val,&glo_val);   
    }    
  }    
  return 0;    
}
```

è¿è¡Œï¼š

![image-20220116224857353](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220116224857353.png)



> è§‚å¯Ÿè¿è¡Œç»“æœï¼Œä¸ºä»€ä¹ˆä¸¤ä¸ªçš„åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯å€¼å´ä¸åŒï¼Ÿï¼Ÿï¼Ÿ
>
> æƒ³ç›´æ¥çŸ¥é“ç»“æœï¼Œå°±å¯ä»¥ç›´æ¥æ‹‰åˆ°æœ€åäº†
>
> åˆ°è¿™é‡Œå¼•å‡ºè™šæ‹Ÿå†…å­˜ï¼Œæ˜¾ç„¶åŒä¸€å—ç©ºé—´ä¸å¯èƒ½æœ‰ä¸¤ä¸ªå€¼ï¼Œå› ä¸ºæˆ‘ä»¬ä»å­¦Cè¯­è¨€èµ·ï¼ˆæ²¡å­¦ç³»ç»Ÿå‰ï¼‰**å–åˆ°çš„åœ°å€éƒ½æ˜¯è™šæ‹Ÿåœ°å€**ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ç‰©ç†åœ°å€ï¼Œæˆ‘ä»¬åœ¨è¯­è¨€å±‚é¢æ‹¿åˆ°çš„éƒ½æ˜¯è™šæ‹Ÿåœ°å€ã€‚

![image-20220116230350224](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220116230350224.png)

> - è™šæ‹Ÿå†…å­˜æœ¬è´¨ä¸Šä¹Ÿä¸è¿‡æ˜¯ç»“æ„ä½“(mm_struct)ï¼ˆ~~æºç æ²¡æ‰¾åˆ°ï¼Œå»ºè®®Linuxæºç ç‰ˆæœ¬åˆ«ä¸‹å¤ªé«˜äº†ï¼Œä¸å¥½æ‰¾ğŸ˜¥~~ï¼‰ï¼Œåœ¨mm_structé‡Œè§„å®šäº†åœ°å€çš„èµ·å§‹ï¼Œæ¯”å¦‚0x00000000åˆ°0x11111111è¿™å—ä»£è¡¨ä»£ç åŒº
>
> - å‡å¦‚å†…å­˜æ˜¯4Gï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šä»¥ä¸ºè‡ªå·±æ‹¥æœ‰äº†4Gçš„å†…å­˜ï¼ˆè™šæ‹Ÿï¼‰
>
>   > è®²ä¸ªå°æ•…äº‹å¸®åŠ©ç†è§£ï¼Œä¸€ä¸ªèº«ä»·åäº¿çš„å¯Œè±ªï¼Œæœ‰åä¸ªç§ç”Ÿå­ï¼Œä»–å¯¹æ¯ä¸ªç§ç”Ÿå­è¯´ï¼šç™¾å¹´ä¹‹åæˆ‘æŠŠè‡ªå·±çš„æ‰€æœ‰è´¢äº§éƒ½å½’åˆ°ä½ åä¸‹ï¼Œç§ç”Ÿå­ä¹‹é—´å¹¶ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œæ‰€ä»¥æ¯ä¸ªç§ç”Ÿå­éƒ½ä¼šä»¥ä¸ºè‡ªå·±æ‹¥æœ‰åäº¿ï¼Œç§ç”Ÿå­æ¯æ¬¡å‘è‡ªå·±çš„çˆ¶äº²è¦é’±çˆ¶äº²éƒ½ä¼šç»™äºˆå›åº”
>   >
>   > å†æ¯”å¦‚ä½ æŠŠåä¸‡å­˜å…¥é“¶è¡Œï¼Œä½ ä»¥ä¸ºè‡ªå·±æœ‰çš„åä¸‡ï¼Œä½ æ¯æ¬¡è¦ä¸€ä¸¤ä¸‡éƒ½èƒ½åˆ°ä»ä¸­å–å‡ºæ¥ï¼Œä½ ä»¥ä¸ºä½ æ‹¥æœ‰åä¸‡ï¼Œä½†æ˜¯ä½ æ¯æ¬¡å–å¾—å¹¶ä¸æ˜¯åŸå…ˆçš„åä¸‡ã€‚
>   >
>   > æ­£å¦‚è¿›ç¨‹éœ€è¦å†…å­˜ç©ºé—´ï¼Œä»–æ˜¯è§‰å¾—è‡ªå·±æ‹¥æœ‰å…¨éƒ¨å†…å­˜çš„ã€‚
>
> - é¡µè¡¨å°±ç›¸å½“äºä¸€ç§æ˜ å°„å…³ç³»
>
> - è™šæ‹Ÿåœ°å€æ˜¯é æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œè™šæ‹Ÿå†…å­˜ä¸ç‰©ç†å†…å­˜çš„è½¬åŒ–é çš„æ˜¯æ“ä½œç³»ç»Ÿ
> - è¿›ç¨‹åœ°å€ç©ºé—´ä¸æ˜¯å†…å­˜ï¼Œè€Œæ˜¯éšç€è¿›ç¨‹ä¸€ç›´å­˜åœ¨ï¼ˆå› ä¸ºæœ¬èº«å°±åªæ˜¯Cè¯­è¨€æ¨¡æ‹Ÿå‡ºæ¥çš„ç¨‹åºè€Œå·²)



## ğŸˆå››ä¸ªé—®é¢˜

### ğŸ¥è¿›ç¨‹åœ°å€ç©ºé—´ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ

- è¿›ç¨‹åœ°å€ç©ºé—´æœ¬è´¨ä¸Šæ˜¯è¿›ç¨‹çœ‹å¾…å†…å­˜çš„æ–¹å¼ï¼Œåœ¨Linuxæºç é‡Œè™šæ‹Ÿå†…å­˜ä¸ä¸¤ä¸ªç»“æ„ä½“çš„å®ç°å¯†åˆ‡ç›¸å…³ï¼ˆå…¶ä¸­ä¸€ä¸ªå°±æ˜¯mm_struct),åœ°å€ç©ºé—´ä¹Ÿæ˜¯è¢«æŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªæ¦‚å¿µ

- åŒºåŸŸåˆ’åˆ†çš„æœ¬è´¨ï¼ˆå †æ ˆ ä»£ç åŒºä¹‹ç±»çš„åˆ’åˆ†ï¼‰æœ¬è´¨ä¸Šæ˜¯å°†çº¿æ€§çš„åœ°å€ç©ºé—´åˆ’åˆ†ä¸ºä¸€å—ä¸€å—çš„ï¼Œæˆ–è€…è¯´ç»™çº¿æ€§çš„åœ°å€ç©ºé—´åŠ ä¸Šè¾¹ç•Œï¼ˆä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä»£ç åŒº[0x00000000,0x11111111]ï¼‰

- è™šæ‹Ÿåœ°å€çš„æœ¬è´¨ï¼šåœ¨è¿™ä¸ªåŒºåŸŸä¹‹é—´çš„åœ°å€å°±å«è™šæ‹Ÿåœ°å€
- è¿›ç¨‹åœ°å€ç©ºé—´åœ¨è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå†…ä¸€ç›´å­˜åœ¨

### ğŸ¥ä¸ºä»€ä¹ˆè¦å­˜åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Ÿ

- ä¿æŠ¤ç‰©ç†å†…å­˜

  > æ²¡æœ‰è™šæ‹Ÿå†…å­˜ï¼Œç›´æ¥æ“ä½œç‰©ç†å†…å­˜çš„è¯ï¼Œæ¥ä¸€ä¸ªæ¶æ„ç¨‹åºé‚£ç‰©ç†å†…å­˜å®¹æ˜“å—åˆ°æ‰“å‡»

- è®©å†…å­˜ç®¡ç†å’Œè¿›ç¨‹ç®¡ç†è§£è€¦ï¼ˆæ²¡æœ‰é‚£ä¹ˆç´§å¯†ç›¸å…³ï¼‰

  > æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼š
  >
  > è¿›ç¨‹ç®¡ç†
  >
  > å†…å­˜ç®¡ç†
  >
  > æ–‡ä»¶ç®¡ç†
  >
  > è®¾å¤‡ç®¡ç†
  >
  > ~~ç†è§£ç®¡ç†å¯ä»¥çœ‹çœ‹ä¸“æ å‰é¢çš„ç¬”è®°~~

- è®©æ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥ä»¥ä¸€æ ·çš„æ–¹å¼æ¥çœ‹å¾…ä»£ç å’Œæ•°æ®ï¼ˆç¡®å®šäº†ä¸€ç§æ–¹å¼ï¼‰



### ğŸ¥è¿›ç¨‹åœ°å€ç©ºé—´çš„åˆ†å¸ƒï¼Ÿ

![image-20220117001027246](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220117001027246.png)

### ğŸ¥åœ°å€ç©ºé—´å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Ÿï¼ˆæµ…è°ˆï¼‰

è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´é€šè¿‡é¡µè¡¨å®Œæˆæ˜ å°„å…³ç³»

~~æˆ‘è¿˜æ²¡å­¦å®Œï¼Œæ‰€ä»¥åªæœ‰ä¸€ç‚¹ï¼Œä»¥åè¿˜ä¼šæåˆ°è¿™ä¸ªé—®é¢˜~~



## ğŸˆåœ°å€ç›¸åŒå†…å®¹ä¸åŒé—®é¢˜è¯¦è§£

> å›¾ç‰‡ç‰ˆï¼š
>![image-20220117004815000](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220117004815000.png)

**ç®€è€Œè¨€ä¹‹ï¼šè™šæ‹Ÿåœ°å€ä¸€æ ·ï¼Œä¸ä»£è¡¨åœ¨ç‰©ç†å†…å­˜çš„åœ°å€ä¸€æ ·**

> æ–‡å­—ç‰ˆï¼šfork()å‡½æ•°åˆ›å»ºäº†å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹çš„PCBï¼ˆtask_structï¼‰é‡Œçš„ä¿¡æ¯å¤§å¤šæ•°ä¸çˆ¶è¿›ç¨‹ä¸€æ ·ï¼Œè€Œglo_val=100åæ”¹å˜äº†æ•°æ®ï¼Œæ•°æ®æ”¹å˜åå°±å¾—æ‹·è´ä¸€ä»½æ–°çš„æ•°æ®ï¼ˆå†™æ—¶æ‹·è´ï¼‰,æ–°çš„æ•°æ®è‡ªç„¶æœ‰æ–°çš„åœ°å€ï¼Œä¹Ÿå³å­è¿›ç¨‹é€šè¿‡é¡µè¡¨æ˜ å°„çš„åœ°å€æ”¹å˜äº†ï¼Œæ‰€ä»¥è®¿é—®æ–°çš„æ•°æ®è‡ªç„¶æ˜¯100ï¼Œè€Œè™šæ‹Ÿåœ°å€ä¸€æ ·ï¼Œåªæ˜¯çœ‹èµ·æ¥ä¸€æ ·è€Œå·²ï¼Œå¹¶ä¸èƒ½ä»£è¡¨ç‰©ç†å†…å­˜æ˜¯åŒä¸€å—



### ğŸˆè¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«ï¼Ÿ

- è¿›ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œç¨‹åºæ˜¯é™æ€çš„

- è¿›ç¨‹å…·æœ‰å¹¶å‘æ€§ï¼Œç¨‹åºæ²¡æœ‰

- è¿›ç¨‹æ˜¯æš‚æ—¶çš„ï¼ˆè¿è¡Œå®Œå°±æ²¡äº†ï¼‰ï¼Œç¨‹åºä¸€ç›´åœ¨

- è¿›ç¨‹ä¼šç«äº‰CPUèµ„æºï¼Œç¨‹åºä¸ä¼š

- è¿›ç¨‹ä¸ç¨‹åºçš„ç»„æˆä¸åŒï¼Œè¿›ç¨‹åŒ…æ‹¬ç¨‹åºã€æ•°æ®å’ŒPCBï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰





> éšç¬”è®°å½•ï¼šé¡µè¡¨æœ‰å¸®åŠ©ç³»ç»Ÿè¿›è¡Œåˆæ³•æ€§æ£€æµ‹çš„ä½œç”¨ï¼ˆæ¯”å¦‚åœ°å€è¶Šç•Œï¼‰
>
> è¯­è¨€å±‚é¢æ˜¯çœ‹åˆ°çš„éƒ½å«è™šæ‹Ÿåœ°å€
>
> æŒ‡é’ˆè¶Šç•Œå¯èƒ½å½±å“è¿›ç¨‹ç‹¬ç«‹æ€§
>
> è™šæ‹Ÿåœ°å€çš„çº¿æ€§åŠŸèƒ½åˆ©äºå¯»å€
>
> å¯æ‰§è¡Œç¨‹åºæœ¬èº«å°±è¢«åˆ’åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„åŒºåŸŸï¼Œåˆ©äºé“¾æ¥ä¹‹ç±»çš„æ“ä½œ

## ğŸˆå°æŠ€å·§ï¼šå—æ³¨é‡Šï¼ˆhjkl)

vimæ‰“å¼€æ–‡ä»¶ -> ctrl+vè¿›å…¥visual blockæ¨¡å¼ -> ç”¨hjklæ¥æ“ä½œå…‰æ ‡ï¼ˆä¸èƒ½ç”¨ä¸Šä¸‹å·¦å³æ–¹å‘é”®ï¼‰-> é€‰ä¸­æ³¨é‡Šè¡Œ -> è¾“å…¥å¤§å†™çš„i (I) è¿›å…¥æ’å…¥æ¨¡å¼ -> è¾“å…¥//(åœ¨æ’å…¥æ¨¡å¼ä¸‹) -> æŒ‰ä¸‹ESC 

å°±å¯ä»¥å‘ç°é€‰ä¸­è¡Œéƒ½æ³¨é‡Šäº†

> æ¼”ç¤ºè¿‡ç¨‹ï¼š
>
> ![markdownåšå®¢æ¼”ç¤º28](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/markdown%E5%8D%9A%E5%AE%A2%E6%BC%94%E7%A4%BA28.gif)

